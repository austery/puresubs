# PureSubs 项目介绍

## 项目愿景

PureSubs 致力于让任何人都能轻松获取 YouTube 视频的字幕内容，无论是用于学习、翻译、内容创作还是无障碍访问。

## 核心价值

- **🌍 普遍可达性**: 让字幕获取不再依赖平台限制
- **🔧 开发者友好**: 提供环境无关的核心引擎，可集成到任何应用中
- **👥 用户优先**: 简洁直观的 Chrome 扩展体验
- **🏗️ 技术卓越**: 工程质量和用户体验并重的产品哲学

## 项目架构

PureSubs 采用双核心架构设计：

### 1. 核心引擎 (`@puresubs/core-engine`)

**环境无关的数据提取引擎**

- ✅ 从 YouTube URL 提取完整视频元数据
- ✅ 获取所有可用语言的字幕内容  
- ✅ 支持多种输出格式 (SRT、TXT、JSON)
- ✅ 完整的 TypeScript 类型支持
- ✅ 可在 Node.js 和浏览器环境运行

**核心 API:**
```typescript
import { getYouTubeData } from '@puresubs/core-engine';

const result = await getYouTubeData(url, {
  extractSubtitles: true,
  preferredLanguages: ['zh-Hans', 'en'],
  includeAutoGenerated: false
});

console.log(result.title);      // 视频标题
console.log(result.subtitles);  // 字幕内容 (SRT, TXT, JSON)
```

### 2. Chrome 扩展 (`@puresubs/chrome-extension`)

**用户友好的浏览器扩展**

- ✅ 在 YouTube 视频页面一键下载字幕
- ✅ 智能语言优先级选择
- ✅ 多格式导出支持
- ✅ 用户偏好记忆
- ✅ 优雅的错误处理和状态反馈

**用户体验特色:**
- **Prophet Mode**: 只在确认有字幕的页面显示下载按钮
- **智能降级**: 中文 → 英文 → 自动生成字幕的优先级策略
- **四层交互反馈**: 从防卫型到结果反馈型的完整状态管理

## 技术架构

### Monorepo 结构

```
PureSubs/
├── packages/
│   ├── core-engine/          # 🔧 核心数据提取引擎
│   │   ├── src/
│   │   │   ├── index.ts      # 主 API 入口
│   │   │   ├── extractor.ts  # YouTube 数据提取
│   │   │   ├── parser.ts     # 字幕解析和格式化
│   │   │   └── types.ts      # TypeScript 类型定义
│   │   └── tests/            # 单元测试 (95%+ 覆盖率)
│   │
│   ├── chrome-extension/     # 🌐 Chrome 浏览器扩展
│   │   ├── src/
│   │   │   ├── manifest.json # Manifest V3 配置
│   │   │   ├── content/      # 内容脚本
│   │   │   ├── background/   # 后台脚本
│   │   │   └── core/         # 间谍脚本注入系统
│   │   └── dist/             # 构建输出
│   │
│   └── pkm-automation/       # 🤖 PKM API 服务
│       └── src/              # Express.js API 服务器
│
├── docs/                     # 📚 项目文档
│   ├── user_guide/           # 用户使用指南
│   ├── development/          # 开发者文档
│   └── architecture/         # 架构决策记录
│
└── tools/                    # 🛠️ 开发工具和未来扩展
```

## 核心技术突破

### 1. 网络请求拦截技术
突破 YouTube 的反解析机制，通过间谍脚本拦截网络请求，获取原始字幕数据。

### 2. 可靠握手协议  
建立内容脚本与间谍脚本间的通信机制，确保数据传输的可靠性。

### 3. Prophet Mode 决策门
预验证字幕可用性，实现 100% 用户预期匹配的交互体验。

## 项目状态

### ✅ 已完成
- 核心引擎完整实现
- Chrome 扩展基础功能
- 网络拦截技术突破
- E2E 测试框架
- 用户体验优化系统

### 🔄 开发中
- 性能优化
- 错误场景完善
- 多语言支持扩展

### 📋 规划中
- n8n 节点集成
- API 服务扩展
- 批量处理功能

## 使用场景

### 👨‍💻 开发者
```bash
# 安装核心引擎
npm install @puresubs/core-engine

# 在项目中使用
import { getYouTubeData } from '@puresubs/core-engine';
```

### 🌐 普通用户
1. 安装 Chrome 扩展
2. 在 YouTube 视频页面看到下载按钮
3. 一键下载喜欢的格式

### 🔧 内容创作者
- 快速获取视频字幕进行翻译
- 提取字幕内容用于内容创作
- 支持批量处理工作流

## 设计哲学

### 技术卓越
- **测试先行**: 95%+ 单元测试覆盖率
- **类型安全**: 完整的 TypeScript 支持
- **性能优先**: 智能缓存和资源优化

### 用户体验优先
- **零困惑原则**: 用户永远知道系统状态
- **防卫型设计**: 避免用户误操作
- **优雅降级**: 智能的错误处理和恢复

### 工程质量
- **代码规范**: ESLint + Prettier 强制规范
- **持续集成**: 自动化测试和部署
- **文档完备**: 从 API 文档到架构决策全覆盖

## 贡献指南

想要贡献代码？请查看：
- [开发环境搭建](./development/01_setup_and_run.md)
- [代码质量规范](./development/03_code_quality_and_typing.md)
- [测试策略](./development/02_testing_strategy.md)

想要了解核心技术决策？请查看：
- [核心提取方法 ADR](./architecture/decisions/ADR_001_core_extraction_method.md)
- [握手协议 ADR](./architecture/decisions/ADR_002_handshake_protocol.md)
- [Prophet Mode ADR](./architecture/decisions/ADR_003_prophet_mode_ux.md)

---

*"让字幕获取变得简单，让技术服务于人。"*  
*— PureSubs 团队*