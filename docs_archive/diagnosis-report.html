<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PureSubs å­—å¹•ä¸‹è½½é—®é¢˜è¯Šæ–­æŠ¥å‘Š</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #e50914;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #e50914;
            padding-bottom: 10px;
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            color: #856404;
        }
        .error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .solution-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .step {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 10px 0;
        }
        .icon {
            font-size: 1.2em;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ PureSubs å­—å¹•ä¸‹è½½é—®é¢˜è¯Šæ–­æŠ¥å‘Š</h1>
        
        <h2>ğŸ” é—®é¢˜åˆ†æ</h2>
        
        <div class="status error">
            <strong>âš ï¸ ä¸»è¦é—®é¢˜ï¼šYouTubeå­—å¹•APIè¿”å›ç©ºå†…å®¹</strong>
            <p>é€šè¿‡æµ‹è¯•å‘ç°ï¼ŒYouTubeçš„å­—å¹•API (timedtext) ç°åœ¨å¯¹å¤–éƒ¨è¯·æ±‚è¿”å›ç©ºå†…å®¹ï¼Œè¿™æ˜¯å¯¼è‡´å­—å¹•ä¸‹è½½å¤±è´¥çš„æ ¹æœ¬åŸå› ã€‚</p>
        </div>

        <div class="status warning">
            <strong>ğŸ“Š æµ‹è¯•ç»“æœæ€»ç»“ï¼š</strong>
            <ul>
                <li>âœ… YouTubeé¡µé¢æ•°æ®è§£ææ­£å¸¸</li>
                <li>âœ… å­—å¹•è½¨é“ä¿¡æ¯è·å–æˆåŠŸ</li>
                <li>âœ… å­—å¹•URLæ ¼å¼æ­£ç¡®</li>
                <li>âŒ å­—å¹•å†…å®¹è·å–å¤±è´¥ï¼ˆAPIè¿”å›ç©ºï¼‰</li>
            </ul>
        </div>

        <h2>ğŸ› ï¸ å·²å®æ–½çš„è§£å†³æ–¹æ¡ˆ</h2>

        <div class="solution-box">
            <h3>ğŸ’¡ å¤šé‡å›é€€ç­–ç•¥å®ç°</h3>
            <p>æˆ‘å·²ç»ä¸ºæ‚¨çš„æ‰©å±•å®ç°äº†ä¸€ä¸ªæ™ºèƒ½çš„å¤šé‡å›é€€ç³»ç»Ÿï¼Œç¡®ä¿å³ä½¿åœ¨APIå¤±è´¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æä¾›æœ‰ç”¨çš„åé¦ˆï¼š</p>
        </div>

        <div class="step">
            <strong>ğŸ¯ ç­–ç•¥1ï¼šå¢å¼ºçš„APIè¯·æ±‚</strong>
            <ul>
                <li>æ·»åŠ äº†å®Œæ•´çš„æµè§ˆå™¨è¯·æ±‚å¤´ï¼ˆUser-Agent, Refererç­‰ï¼‰</li>
                <li>å¯ç”¨äº†cookieså’Œæ­£ç¡®çš„referrerç­–ç•¥</li>
                <li>å¢åŠ äº†è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•</li>
            </ul>
        </div>

        <div class="step">
            <strong>ğŸ¯ ç­–ç•¥2ï¼šDOMå†…å®¹æå–</strong>
            <ul>
                <li>ä»é¡µé¢è„šæœ¬ä¸­æœç´¢åµŒå…¥çš„å­—å¹•æ•°æ®</li>
                <li>æ£€æµ‹YouTubeæ’­æ”¾å™¨ä¸­çš„å®æ—¶å­—å¹•æ˜¾ç¤º</li>
                <li>æ™ºèƒ½æ–‡æœ¬æ¸…ç†å’Œæ ¼å¼åŒ–</li>
            </ul>
        </div>

        <div class="step">
            <strong>ğŸ¯ ç­–ç•¥3ï¼šç”¨æˆ·å‹å¥½çš„é”™è¯¯å¤„ç†</strong>
            <ul>
                <li>å½“å­—å¹•ä¸å¯ç”¨æ—¶ï¼Œç”Ÿæˆè¯¦ç»†çš„è¯´æ˜æ–‡æ¡£</li>
                <li>æä¾›æ•…éšœæ’é™¤å»ºè®®</li>
                <li>æ”¯æŒSRTå’ŒTXTæ ¼å¼çš„é”™è¯¯ä¿¡æ¯ä¸‹è½½</li>
            </ul>
        </div>

        <h2>ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶</h2>

        <div class="code">
<strong>ä¸»è¦ä¿®æ”¹ï¼š</strong>
1. packages/chrome-extension/src/core/browser-engine.ts
   - å¢å¼ºäº†fetchSubtitleXML()å‡½æ•°çš„è¯·æ±‚å¤´
   - æ”¹è¿›äº†getYouTubeDataFromPage()çš„é”™è¯¯å¤„ç†
   - æ·»åŠ äº†è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

2. packages/chrome-extension/src/background/background.ts
   - ä¼˜åŒ–äº†handleFetchSubtitleXml()å‡½æ•°
   - æ·»åŠ äº†æ›´å®Œæ•´çš„HTTPè¯·æ±‚å¤´
   - å¢å¼ºäº†é”™è¯¯æŠ¥å‘Šæœºåˆ¶

3. packages/chrome-extension/src/core/subtitle-fallbacks.tsï¼ˆæ–°å¢ï¼‰
   - å®ç°äº†DOMå­—å¹•æå–åŠŸèƒ½
   - æä¾›äº†ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯ç”Ÿæˆ
   - åŒ…å«äº†å¤šé‡å›é€€ç­–ç•¥çš„åè°ƒé€»è¾‘
        </div>

        <h2>ğŸš€ ä½¿ç”¨å»ºè®®</h2>

        <div class="status success">
            <strong>âœ… ç«‹å³å¯ç”¨çš„åŠŸèƒ½ï¼š</strong>
            <ol>
                <li><strong>æ‰©å±•å®‰è£…</strong>ï¼šå°† <code>packages/chrome-extension/dist/</code> æ–‡ä»¶å¤¹åŠ è½½åˆ°Chromeæ‰©å±•å¼€å‘è€…æ¨¡å¼</li>
                <li><strong>è®¿é—®YouTube</strong>ï¼šæ‰“å¼€ä»»æ„YouTubeè§†é¢‘é¡µé¢</li>
                <li><strong>ä¸‹è½½å­—å¹•</strong>ï¼šç‚¹å‡»PureSubsæŒ‰é’®å°è¯•ä¸‹è½½</li>
                <li><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼šå³ä½¿å­—å¹•APIå¤±è´¥ï¼Œä¹Ÿä¼šå¾—åˆ°è¯¦ç»†çš„é—®é¢˜è¯´æ˜</li>
            </ol>
        </div>

        <h2>ğŸ”¬ è¿›ä¸€æ­¥çš„è§£å†³æ–¹æ¡ˆ</h2>

        <div class="status warning">
            <strong>ğŸ” é•¿æœŸè§£å†³æ–¹æ¡ˆï¼š</strong>
            <ul>
                <li><strong>YouTube Transcript API</strong>ï¼šç ”ç©¶ä½¿ç”¨å®˜æ–¹çš„YouTube Data API v3</li>
                <li><strong>æµè§ˆå™¨è‡ªåŠ¨åŒ–</strong>ï¼šé€šè¿‡æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œè·å–å­—å¹•</li>
                <li><strong>ç¬¬ä¸‰æ–¹æœåŠ¡</strong>ï¼šé›†æˆä¸“ä¸šçš„å­—å¹•æå–æœåŠ¡</li>
                <li><strong>ç”¨æˆ·åé¦ˆæ”¶é›†</strong>ï¼šå»ºç«‹é—®é¢˜æŠ¥å‘Šç³»ç»Ÿï¼Œæ”¶é›†å¤±è´¥æ¡ˆä¾‹</li>
            </ul>
        </div>

        <h2>ğŸ“ æŠ€æœ¯æ”¯æŒ</h2>

        <div class="solution-box">
            <h3>ğŸ¤ å¦‚ä½•æµ‹è¯•ä¿®å¤æ•ˆæœ</h3>
            <ol>
                <li>é‡æ–°æ„å»ºæ‰©å±•ï¼ˆå·²å®Œæˆï¼‰</li>
                <li>åœ¨Chromeä¸­é‡æ–°åŠ è½½æ‰©å±•</li>
                <li>è®¿é—®YouTubeè§†é¢‘é¡µé¢</li>
                <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—</li>
                <li>ç‚¹å‡»å­—å¹•ä¸‹è½½æŒ‰é’®</li>
                <li>æ£€æŸ¥ä¸‹è½½çš„æ–‡ä»¶å†…å®¹</li>
            </ol>
        </div>

        <div class="status success">
            <strong>ğŸ“ˆ é¢„æœŸæ”¹è¿›æ•ˆæœï¼š</strong>
            <ul>
                <li>ç”¨æˆ·ä¸å†é‡åˆ°"ç©ºç™½ä¸‹è½½"é—®é¢˜</li>
                <li>è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å¸®åŠ©ç”¨æˆ·ç†è§£é—®é¢˜</li>
                <li>å¼€å‘è€…è·å¾—æ›´å¥½çš„è°ƒè¯•ä¿¡æ¯</li>
                <li>ä¸ºæœªæ¥çš„APIä¿®å¤å¥ å®šåŸºç¡€</li>
            </ul>
        </div>

        <div class="code">
<strong>æµ‹è¯•å‘½ä»¤ï¼š</strong>
cd /Users/pengl/projects/PureSubs
pnpm build
# ç„¶ååœ¨Chromeä¸­é‡æ–°åŠ è½½æ‰©å±•è¿›è¡Œæµ‹è¯•
        </div>

        <p style="text-align: center; margin-top: 40px; color: #666;">
            <strong>PureSubs Team</strong> â€¢ è‡´åŠ›äºä¸ºç”¨æˆ·æä¾›æœ€ä½³çš„å­—å¹•ä¸‹è½½ä½“éªŒ ğŸ¬
        </p>
    </div>
</body>
</html>
